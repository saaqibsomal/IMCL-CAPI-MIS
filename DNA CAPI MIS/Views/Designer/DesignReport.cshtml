@model IEnumerable<DNA_CAPI_MIS.Models.ProjectField>

@{
    ViewBag.Title = "Query Designer";
}
<!-- DSDS drag-drop -->
<link href="~/Content/DSDS/dsds.css" rel="stylesheet" type="text/css" />

@section Scripts {
    @Scripts.Render("~/bundles/bootstrap/jqwidgets")
    <script>
        $(document).ready(function () {
            $("#optionReport").click(function () {
                $('#publishAsChart').css('display', 'none');
                $('#publishAsReport').css('display', 'block');
            });
            $("#optionGraph").click(function () {
                $('#publishAsChart').css('display', 'block');
                $('#publishAsReport').css('display', 'none');
            });
        });
    </script>
    <script src="~/Content/DSDS/dsds-designreport.js"></script>
}

<div class="nav-tabs-custom box" style="border-top: none;">
    <ul class="nav nav-tabs">
        <li class="active"><a href="#tab_1" id="tab1" data-toggle="tab">Query</a></li>
        <li><a href="#tab_2" id="tab2" data-toggle="tab">Filter</a></li>
        <li><a href="#tab_3" id="tab3" data-toggle="tab">Tabulation</a></li>
        <li><a href="#tab_4" id="tab4" data-toggle="tab">Publish</a></li>
        <li class="pull-right"><a href="~/Designer/PQSettings/@ViewBag.ProjectId" class="text-muted"><i class="fa fa-gear"></i></a></li>
    </ul>
    <div class="tab-content">
        <div class="tab-pane active" id="tab_1">

            <div class="row">
                @if (Model == null)
                {
            <div class="alert alert-danger alert-dismissable">
                <i class="fa fa-ban"></i>
                <button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>
                <b>Alert!</b> No Project is opened yet.
            </div>
                }
                else
                {
                    using (Html.BeginForm())
                    {
            <section class="col-lg-6 connectedSortable">
                <div class="row">
                    <div class="col-xs-12">
                        <div class="box box-solid box-info">
                            <div class="box-header">
                                <h3 class="box-title">Questionnaire</h3>
                                <div class="box-tools pull-right">
                                    <button class="btn btn-info btn-sm" data-widget="collapse"><i class="fa fa-minus"></i></button>

                                </div>
                            </div>
                            <div class="box-body" style="display:-webkit-box;">
                                <div class="dd Questionnaire" id="pfAll">
                                    <ol class="dd-list Questionnaire">
                                        @foreach (var item in Model)
                                        {
                                        <div style="width: 100%; display: inline-block;">
                                            <li data-id="@item.ID" style="position:relative;float:left;width:98px;">
                                                <div class="btn-group">
                                                    <button type="button" class="btn btn-default btn-checkbox item-unchecked" style="height:30px;"></button>
                                                    <button type="button" data-action="addnewto-top" class="btn btn-default btn-top" style="height: 30px; padding: 4px">Top</button>
                                                    <button type="button" data-action="addnewto-side" class="btn btn-default btn-side" style="height: 30px; padding: 4px">Side</button>
                                                </div>
                                            </li>
                                            <li class="dd-item" data-id="@item.ID">
                                                <div class="dd-handle">@item.Title</div>
                                            </li>
                                        </div>
                                        }
                                    </ol>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <section class="col-lg-6 connectedSortable">
                <div class="row">
                    <div class="col-xs-12">
                        <div class="box box-solid box-info">
                            <div class="box-header">
                                <h3 class="box-title">Top</h3>
                                <div class="box-tools pull-right">
                                    <button class="btn btn-info btn-sm" data-widget="collapse"><i class="fa fa-minus"></i></button>
                                </div>
                            </div>
                            <div class="box-body" style="display:-webkit-box;">
                                <div class="dd" id="pfTop">
                                    <div class="dd-empty"></div>
                                </div>
                            </div><!-- /.box-body -->
                        </div><!-- /.box -->
                    </div><!-- /.col -->
                </div>
                <div class="row">
                    <div class="col-xs-12">
                        <div class="box box-solid box-info">
                            <div class="box-header">
                                <h3 class="box-title">Sides</h3>
                                <div class="box-tools pull-right">
                                    <button class="btn btn-info btn-sm" data-widget="collapse"><i class="fa fa-minus"></i></button>
                                </div>
                            </div>
                            <div class="box-body" style="display:-webkit-box;">
                                <div class="dd" id="pfSide">
                                    <div class="dd-empty"></div>
                                </div>
                            </div><!-- /.box-body -->
                        </div><!-- /.box -->
                    </div><!-- /.col -->
                </div>
                <div class="row" style="margin-left:0px;">
                    <button class="btn btn-primary" type="submit" id="startQuery">Start Query</button>
                    <button class="btn btn-warning" onclick='javascript: window.navigate("/Designer/ProjectOverview/@ViewBag.ProjectId")'>Cancel</button>
                    <input id="ProjectID" name="ProjectID" type="hidden" value="@ViewBag.ProjectId" />
                    <input id="pfTop-output" name="FieldsTop" type="hidden" value="" />
                    <input id="pfSide-output" name="FieldsSide" type="hidden" value="" />
                </div>
            </section>
                    }
                }
            </div><!-- /.col row-->
        </div><!-- /.tab-pane -->

        <div class="tab-pane" id="tab_2">
        </div><!-- /.tab-pane -->

        <div class="tab-pane" id="tab_3">
            <div id="tabulation"></div>
        </div><!-- /.tab-pane -->

        <div class="tab-pane" id="tab_4"> <!-- Publish tab-->
            <div class="row">
                @using (Html.BeginForm())
                {
                    <section class="col-lg-12 connectedSortable">
                        <div class="row">
                            <div class="col-md-12">

                                <div class="box-body">
                                    <div class="form-group"> <!-- Radio buttons-->
                                        <div class="radio">
                                            <label class="">
                                                <input type="radio" name="outputOptions" id="optionReport" value="R" checked="">
                                                Save as tabular report
                                            </label>
                                        </div>
                                        <div class="radio">
                                            <label class="">
                                                <input type="radio" name="outputOptions" id="optionGraph" value="G">
                                                Save as graphical chart
                                            </label>
                                        </div>
                                    </div>

                                    <div class="form-group" style="display:block;" id="publishAsReport">
                                        <label for="reportName">Report Name</label>
                                        <input type="text" class="form-control" id="reportName" placeholder="Enter name of report">
                                    </div>

                                    <div class="form-group" style="display:block;" id="publishAsChart">
                                        <a href="~/Designer/GraphType/@ViewBag.ProjectId" class="form-control">Select Graph type</a>
                                    </div>

                                    <div class="checkbox">
                                        <label class="">
                                            <input type="checkbox" style="position: absolute; opacity: 0;">
                                            Visible for Customers
                                        </label>
                                    </div>
                                </div>

                                <div class="box-footer">
                                    <button class="btn btn-primary" type="submit" id="startQuery">Publish</button>
                                    <button class="btn btn-warning" onclick='javascript: window.navigate("/Designer/ProjectOverview/@ViewBag.ProjectId")'>Cancel</button>
                                    <input id="ProjectID" name="ProjectID" type="hidden" value="@ViewBag.ProjectId" />
                                </div>
                            </div>
                        </div>
                    </section>
                }
            </div>
        </div><!-- /.tab-pane -->

    </div><!-- /.tab-content -->
    <!-- Loading (remove the following to stop the loading)-->
    <div class="overlay" style="display:none;"></div>
    <div class="loading-img" style="display: none; background: transparent url('/Content/AdminLTE/img/ajax-loader1.gif') 50% 25% no-repeat;"></div>
    <!-- end loading -->
</div>
